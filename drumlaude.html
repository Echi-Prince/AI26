<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>808 Drum Machine</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #eee;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            background: #2a2a3e;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            max-width: 1000px;
            width: 100%;
        }
        
        h1 {
            text-align: center;
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 0 0 20px rgba(255,107,107,0.5);
        }
        
        .subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 30px;
            font-size: 0.9em;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        button {
            background: linear-gradient(145deg, #ff6b6b, #ee5a52);
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(0,0,0,0.4);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        button.playing {
            background: linear-gradient(145deg, #4ecdc4, #44a89d);
        }
        
        .tempo-control {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #1a1a2e;
            padding: 15px 25px;
            border-radius: 10px;
        }
        
        .tempo-control label {
            font-weight: bold;
            color: #4ecdc4;
        }
        
        .tempo-control input {
            width: 120px;
        }
        
        .tempo-control span {
            color: #ff6b6b;
            font-weight: bold;
            min-width: 60px;
        }
        
        .sequencer {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 15px;
            overflow-x: auto;
        }
        
        .track {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px;
        }
        
        .track-label {
            min-width: 100px;
            font-weight: bold;
            color: #4ecdc4;
            font-size: 14px;
        }
        
        .steps {
            display: flex;
            gap: 5px;
        }
        
        .step {
            width: 40px;
            height: 40px;
            background: #2a2a3e;
            border: 2px solid #3a3a4e;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .step:hover {
            border-color: #ff6b6b;
        }
        
        .step.active {
            background: #ff6b6b;
            border-color: #ff6b6b;
            box-shadow: 0 0 15px rgba(255,107,107,0.6);
        }
        
        .step.playing {
            border-color: #4ecdc4;
            border-width: 3px;
            box-shadow: 0 0 20px rgba(78,205,196,0.8);
        }
        
        .step.beat-4 {
            margin-left: 10px;
        }
        
        .info {
            margin-top: 30px;
            padding: 20px;
            background: #1a1a2e;
            border-radius: 10px;
            border-left: 4px solid #4ecdc4;
        }
        
        .info h3 {
            color: #4ecdc4;
            margin-bottom: 10px;
        }
        
        .info p {
            line-height: 1.6;
            color: #ccc;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TR-808 Drum Machine</h1>
        <p class="subtitle">Click squares to create patterns • Adjust tempo • Press Play</p>
        
        <div class="controls">
            <button id="playBtn">▶ PLAY</button>
            <button id="clearBtn">CLEAR</button>
            <div class="tempo-control">
                <label for="tempo">TEMPO:</label>
                <input type="range" id="tempo" min="60" max="180" value="120">
                <span id="tempoValue">120 BPM</span>
            </div>
        </div>
        
        <div class="sequencer" id="sequencer"></div>
        
        <div class="info">
            <h3>About the TR-808</h3>
            <p><strong>The Roland TR-808</strong> is a legendary drum machine from 1980 that shaped modern music. Despite being discontinued in 1983, its distinctive synthetic sounds became iconic in hip-hop, electronic, and pop music.</p>
            <p><strong>How to use:</strong> Click the squares to activate steps in the sequence. Each row is a different drum sound. Press PLAY to hear your beat loop. The highlighted column shows which step is currently playing.</p>
            <p><strong>Classic 808 sounds included:</strong> Kick (bass drum), Snare, Clap, Hi-Hat (closed), Open Hat, Tom, and Cowbell.</p>
        </div>
    </div>

    <script>
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const ctx = new AudioContext();
        
        const tracks = [
            { name: 'KICK', freq: 60 },
            { name: 'SNARE', freq: 200 },
            { name: 'CLAP', freq: 150 },
            { name: 'HI-HAT', freq: 8000 },
            { name: 'OPEN HAT', freq: 6000 },
            { name: 'TOM', freq: 150 },
            { name: 'COWBELL', freq: 800 }
        ];
        
        const steps = 16;
        let pattern = tracks.map(() => Array(steps).fill(false));
        let currentStep = 0;
        let isPlaying = false;
        let intervalId = null;
        let tempo = 120;
        
        const sequencer = document.getElementById('sequencer');
        const playBtn = document.getElementById('playBtn');
        const clearBtn = document.getElementById('clearBtn');
        const tempoSlider = document.getElementById('tempo');
        const tempoValue = document.getElementById('tempoValue');
        
        function createSequencer() {
            tracks.forEach((track, trackIdx) => {
                const trackDiv = document.createElement('div');
                trackDiv.className = 'track';
                
                const label = document.createElement('div');
                label.className = 'track-label';
                label.textContent = track.name;
                trackDiv.appendChild(label);
                
                const stepsDiv = document.createElement('div');
                stepsDiv.className = 'steps';
                
                for (let i = 0; i < steps; i++) {
                    const step = document.createElement('div');
                    step.className = 'step';
                    if (i % 4 === 0 && i !== 0) step.classList.add('beat-4');
                    step.dataset.track = trackIdx;
                    step.dataset.step = i;
                    
                    step.addEventListener('click', () => {
                        pattern[trackIdx][i] = !pattern[trackIdx][i];
                        step.classList.toggle('active');
                    });
                    
                    stepsDiv.appendChild(step);
                }
                
                trackDiv.appendChild(stepsDiv);
                sequencer.appendChild(trackDiv);
            });
        }
        
        function playSound(trackIdx) {
            const track = tracks[trackIdx];
            const now = ctx.currentTime;
            
            if (track.name === 'KICK') {
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.frequency.setValueAtTime(150, now);
                osc.frequency.exponentialRampToValueAtTime(40, now + 0.5);
                gain.gain.setValueAtTime(1, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.5);
                osc.connect(gain).connect(ctx.destination);
                osc.start(now);
                osc.stop(now + 0.5);
            } else if (track.name === 'SNARE') {
                const noise = ctx.createBufferSource();
                const buffer = ctx.createBuffer(1, ctx.sampleRate * 0.2, ctx.sampleRate);
                const data = buffer.getChannelData(0);
                for (let i = 0; i < data.length; i++) {
                    data[i] = Math.random() * 2 - 1;
                }
                noise.buffer = buffer;
                
                const noiseFilter = ctx.createBiquadFilter();
                noiseFilter.type = 'highpass';
                noiseFilter.frequency.value = 1000;
                
                const noiseGain = ctx.createGain();
                noiseGain.gain.setValueAtTime(1, now);
                noiseGain.gain.exponentialRampToValueAtTime(0.01, now + 0.2);
                
                noise.connect(noiseFilter).connect(noiseGain).connect(ctx.destination);
                noise.start(now);
            } else if (track.name === 'CLAP') {
                for (let i = 0; i < 3; i++) {
                    const noise = ctx.createBufferSource();
                    const buffer = ctx.createBuffer(1, ctx.sampleRate * 0.05, ctx.sampleRate);
                    const data = buffer.getChannelData(0);
                    for (let j = 0; j < data.length; j++) {
                        data[j] = Math.random() * 2 - 1;
                    }
                    noise.buffer = buffer;
                    
                    const gain = ctx.createGain();
                    gain.gain.value = 0.3;
                    
                    noise.connect(gain).connect(ctx.destination);
                    noise.start(now + i * 0.03);
                }
            } else if (track.name === 'HI-HAT') {
                const noise = ctx.createBufferSource();
                const buffer = ctx.createBuffer(1, ctx.sampleRate * 0.05, ctx.sampleRate);
                const data = buffer.getChannelData(0);
                for (let i = 0; i < data.length; i++) {
                    data[i] = Math.random() * 2 - 1;
                }
                noise.buffer = buffer;
                
                const filter = ctx.createBiquadFilter();
                filter.type = 'highpass';
                filter.frequency.value = 7000;
                
                const gain = ctx.createGain();
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                
                noise.connect(filter).connect(gain).connect(ctx.destination);
                noise.start(now);
            } else if (track.name === 'OPEN HAT') {
                const noise = ctx.createBufferSource();
                const buffer = ctx.createBuffer(1, ctx.sampleRate * 0.3, ctx.sampleRate);
                const data = buffer.getChannelData(0);
                for (let i = 0; i < data.length; i++) {
                    data[i] = Math.random() * 2 - 1;
                }
                noise.buffer = buffer;
                
                const filter = ctx.createBiquadFilter();
                filter.type = 'highpass';
                filter.frequency.value = 5000;
                
                const gain = ctx.createGain();
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                
                noise.connect(filter).connect(gain).connect(ctx.destination);
                noise.start(now);
            } else if (track.name === 'TOM') {
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.exponentialRampToValueAtTime(80, now + 0.3);
                gain.gain.setValueAtTime(0.5, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
                osc.connect(gain).connect(ctx.destination);
                osc.start(now);
                osc.stop(now + 0.3);
            } else if (track.name === 'COWBELL') {
                const osc1 = ctx.createOscillator();
                const osc2 = ctx.createOscillator();
                const gain = ctx.createGain();
                osc1.frequency.value = 800;
                osc2.frequency.value = 540;
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.2);
                osc1.connect(gain);
                osc2.connect(gain);
                gain.connect(ctx.destination);
                osc1.start(now);
                osc2.start(now);
                osc1.stop(now + 0.2);
                osc2.stop(now + 0.2);
            }
        }
        
        function step() {
            const allSteps = document.querySelectorAll('.step');
            allSteps.forEach(s => s.classList.remove('playing'));
            
            tracks.forEach((track, trackIdx) => {
                if (pattern[trackIdx][currentStep]) {
                    playSound(trackIdx);
                }
                
                const stepEl = document.querySelector(`[data-track="${trackIdx}"][data-step="${currentStep}"]`);
                stepEl.classList.add('playing');
            });
            
            currentStep = (currentStep + 1) % steps;
        }
        
        playBtn.addEventListener('click', () => {
            if (ctx.state === 'suspended') ctx.resume();
            
            if (!isPlaying) {
                isPlaying = true;
                playBtn.textContent = '⏸ PAUSE';
                playBtn.classList.add('playing');
                const interval = (60 / tempo) * 1000 / 4;
                intervalId = setInterval(step, interval);
            } else {
                isPlaying = false;
                playBtn.textContent = '▶ PLAY';
                playBtn.classList.remove('playing');
                clearInterval(intervalId);
                document.querySelectorAll('.step').forEach(s => s.classList.remove('playing'));
            }
        });
        
        clearBtn.addEventListener('click', () => {
            pattern = tracks.map(() => Array(steps).fill(false));
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        });
        
        tempoSlider.addEventListener('input', (e) => {
            tempo = parseInt(e.target.value);
            tempoValue.textContent = tempo + ' BPM';
            
            if (isPlaying) {
                clearInterval(intervalId);
                const interval = (60 / tempo) * 1000 / 4;
                intervalId = setInterval(step, interval);
            }
        });
        
        createSequencer();
    </script>
</body>
</html>
